{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["STOCK_LIST","name","code","getOptions","legend","data","map","el","tooltip","trigger","axisPointer","type","animation","xAxis","yAxis","axisLabel","formatter","series","App","useState","isLoaded","setLoaded","option","setOption","optionHigh","setOptionHigh","optionLow","setOptionLow","useEffect","fetchDataFromCsv","stockNumber","a","fetch","window","location","origin","response","reader","body","getReader","read","result","decoder","TextDecoder","csv","decode","value","readString","stockData","stockDataHigh","stockDataLow","fetchAllData","forEach","number","push","Promise","all","then","index","stock","length","priceList","slice","parseInt","mean","Math","min","max","ref","getData","className","style","height","width","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.87aa214b.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ReactEcharts from \"echarts-for-react\";\n\nimport { readString } from \"react-papaparse\";\nimport \"./App.css\";\n\nconst STOCK_LIST = [\n  { name: \"삼성전자\", code: \"005930\" },\n  { name: \"SK하이닉스\", code: \"000660\" },\n  { name: \"NAVER\", code: \"035420\" },\n  { name: \"삼성바이오로직스\", code: \"207940\" },\n  { name: \"LG화학\", code: \"051910\" },\n  { name: \"셀트리온\", code: \"068270\" },\n  { name: \"삼성전자우\", code: \"005935\" },\n  { name: \"삼성SDI\", code: \"006400\" },\n  { name: \"카카오\", code: \"035720\" },\n  { name: \"현대차\", code: \"005380\" },\n  { name: \"LG생활건강\", code: \"051900\" },\n  { name: \"현대모비스\", code: \"012330\" },\n  { name: \"삼성물산\", code: \"028260\" },\n  { name: \"엔씨소프트\", code: \"036570\" },\n  { name: \"SK\", code: \"034730\" },\n  { name: \"삼성전기\", code: \"009150\" },\n  { name: \"삼성에스디에스\", code: \"018260\" },\n  { name: \"KB금융\", code: \"105560\" },\n  { name: \"기아차\", code: \"000270\" },\n  { name: \"SK이노베이션\", code: \"096770\" },\n  { name: \"대상\", code: \"001680\" },\n  { name: \"농심\", code: \"004370\" },\n  { name: \"휴비스\", code: \"079980\" },\n  { name: \"하이트진로\", code: \"000080\" },\n];\n\nconst getOptions = () => ({\n  legend: {\n    data: STOCK_LIST.map((el) => `${el.name}/${el.code}`),\n  },\n  tooltip: {\n    trigger: \"axis\",\n    axisPointer: {\n      type: \"cross\",\n      animation: false,\n    },\n    // formatter: function (params) {\n    //   console.log(params);\n    //   return `날짜 : ${params[0].name} <br> 가격 : ${params[0].value} <br> 종목 :  ${params[0].seriesName}`;\n    // },\n  },\n  xAxis: {\n    type: \"category\",\n    data: [],\n  },\n  yAxis: {\n    type: \"value\",\n    axisLabel: {\n      formatter: \"{value} 원\",\n    },\n    // min: 0,\n    // max: 0,\n    // interval: 0,\n  },\n  series: [],\n});\n\nfunction App() {\n  const [isLoaded, setLoaded] = useState(false);\n  const [option, setOption] = useState(getOptions());\n  const [optionHigh, setOptionHigh] = useState(getOptions());\n  const [optionLow, setOptionLow] = useState(getOptions());\n\n  useEffect(() => {\n    async function fetchDataFromCsv(stockNumber) {\n      const response = await fetch(\n        `${window.location.origin}/stock/data/${stockNumber}.csv`\n      );\n      const reader = response.body.getReader();\n      const result = await reader.read(); // raw array\n      const decoder = new TextDecoder(\"utf-8\");\n      const csv = decoder.decode(result.value); // the csv text\n      return readString(csv);\n    }\n\n    function getData() {\n      // console.log(chartInstance);\n\n      // if (chartInstance) {\n      //   chartInstance.dispose();\n      // }\n\n      // if (chartInstance) chartInstance.getEchartsInstance().clear();\n\n      const stockData = {\n        ...option,\n        xAxis: {\n          ...option.xAxis,\n        },\n        yAxis: {\n          ...option.yAxis,\n        },\n        series: [...option.series],\n      };\n\n      const stockDataHigh = {\n        ...optionHigh,\n        xAxis: {\n          ...optionHigh.xAxis,\n        },\n        yAxis: {\n          ...optionHigh.yAxis,\n        },\n        series: [...optionHigh.series],\n      };\n\n      const stockDataLow = {\n        ...optionLow,\n        xAxis: {\n          ...optionLow.xAxis,\n        },\n        yAxis: {\n          ...optionLow.yAxis,\n        },\n        series: [...optionLow.series],\n      };\n\n      const fetchAllData = [];\n      STOCK_LIST.map((el) => el.code).forEach(async (number) => {\n        fetchAllData.push(fetchDataFromCsv(number));\n      });\n\n      Promise.all(fetchAllData).then((data) => {\n        // let minValue;\n        // let maxValue;\n        // let interval;\n        data.forEach(({ data: stock }, index) => {\n          const length = stock.length;\n          const priceList = stock\n            .slice(1, length - 1)\n            .map((el) => parseInt(el[4], 10));\n\n          const mean = (Math.min(...priceList) + Math.max(...priceList)) / 2;\n          let ref =\n            mean > 200000\n              ? stockDataHigh\n              : mean < 100000\n              ? stockDataLow\n              : stockData;\n\n          ref.xAxis = {\n            ...ref.xAxis,\n            data: stock.slice(1, length - 1).map((el) => el[0]),\n          };\n\n          // minValue = minValue\n          //   ? Math.min(minValue, ...priceList)\n          //   : Math.min(...priceList);\n          // maxValue = maxValue\n          //   ? Math.max(maxValue, ...priceList)\n          //   : Math.max(...priceList);\n\n          // interval = Math.floor((maxValue - minValue + 10000) / 10);\n\n          ref.yAxis = {\n            ...ref.yAxis,\n            // min: minValue - interval < 0 ? 0 : minValue - interval,\n            // max: maxValue + interval,\n            // interval: interval,\n          };\n\n          ref.series.push({\n            data: stock.slice(1, length - 1).map((el) => parseInt(el[4], 10)),\n            type: \"line\",\n            name: `${STOCK_LIST[index][\"name\"]}/${STOCK_LIST[index][\"code\"]}`,\n          });\n        });\n        setLoaded(true);\n        setOption(stockData);\n        setOptionHigh(stockDataHigh);\n        setOptionLow(stockDataLow);\n      });\n    }\n    getData();\n  }, []);\n  return (\n    <div className=\"App\">\n      {STOCK_LIST &&\n        STOCK_LIST.map((el) => (\n          <div>{`종목이름 :${el.name}/종목코드 : ${el.code}`}</div>\n        ))}\n      {isLoaded && (\n        <ReactEcharts\n          style={{ height: \"700px\", width: \"100%\" }}\n          option={optionHigh}\n        />\n      )}\n      {isLoaded && (\n        <ReactEcharts\n          style={{ height: \"700px\", width: \"100%\" }}\n          option={option}\n        />\n      )}\n\n      {isLoaded && (\n        <ReactEcharts\n          style={{ height: \"700px\", width: \"100%\" }}\n          option={optionLow}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}